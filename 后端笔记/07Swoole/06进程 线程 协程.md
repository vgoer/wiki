<center>进程 线程 协程</center>







[toc]







## 进程 线程 协程

> 进程相关的问题，在计算机专业中一般是操作系统中来进行讲解的。 [blog](http://www.zyblog.com.cn/article/767)







### 1. 进程

> 进程，最简单的理解就是我们运行起来的软件。它是一段程序的执行过程。比如说，你在 Windows 上打开了 QQ ，然后去任务管理器就可以看到一个 QQ.exe 的程序正在执行。这个东西就叫做进程。

> 多进程操作其实就是充分利用多核 CPU 的优势，一个 CPU 去对应一个进程的操作，从而提高进程的执行效率。比如我们在 Swoole 中可以设置 worker_num ，它的建议设置值就是根据 CPU 的核数。同样地，Nginx 配置中的 worker_processes 也是建议配置成 CPU 的核数。



### 2.线程

> 线程，是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。





### 3. 协程

> 协程，从官方意义上来说，不是进程也不是线程，它更类似于一个不带返回值的函数调用。但是，如果通俗一点说，你把它想象成线程也问题不大，只不过这个线程是用户态的。什么意思呢？进程和线程是系统来控制的，包括切换调度，而协程是可以自己操作的，不需要操作系统参与，创建销毁的成本非常低。但同时，它又不像多线程可以充分利用 CPU 。在 Swoole 中，我们在协程中需要借助于多进程模型来利用到多核 CPU 的优势。





>  我们来总结一下这三个程的特点。一个一个来说。

### 进程

- 就是我们执行的程序。程序和程序之间没有共享内容，都是自己独立的内存空间。
- 调度切换由操作系统完成，用户无感知，切换内容非常多，开销大，效率低。
- 需要通信的话一般是通过信号传递，或者外部工具。

### 线程

- 进程下面的小弟，同一个进程间的多个线程共享内存。
- 真正的并行执行，可以利用 CPU 的核数。
- 调度切换比进程小，但一样是操作系统完成，开销和效率中等。

### 协程

- 线程的小弟，但其实更像是一个函数。
- 在线程之上的串行运行，依赖于线程，而且依赖于异步 IO ，如果没有 异步IO 的支持，它和线程没什么区别。
- 更加轻量级，用户态切换，开销成本低，效率非常高。



