<center>国际化</center>





[toc]









## 国际化

> Hyperf 对国际化的支持是非常友好的，允许让您的项目支持多种语言。







### 1. 安装

```shell
composer require hyperf/translation
```





### [配置默认语言环境](https://hyperf.wiki/3.1/#/zh-cn/translation?id=配置默认语言环境)

关于国际化组件的相关配置都是在 `config/autoload/translation.php` 配置文件里设定的，你可以按照实际需要修改它。

```php
<?php
// config/autoload/translation.php

return [
    // 默认语言
    'locale' => 'zh_CN',
    // 回退语言，当默认语言的语言文本没有提供时，就会使用回退语言的对应语言文本
    'fallback_locale' => 'en',
    // 语言文件存放的文件夹
    'path' => BASE_PATH . '/storage/languages',
];
```





### [语言文件](https://hyperf.wiki/3.1/#/zh-cn/translation?id=语言文件)

Hyperf 的语言文件默认都放在 `storage/languages` 下面，您也可以在 `config/autoload/translation.php` 内更改语言文件的文件夹，每种语言对应其中的一个子文件夹，例如 `en` 指英文语言文件，`zh_CN` 指中文简体的语言文件，你可以按照实际需要创建新的语言文件夹和里面的语言文件。示例如下：

```
/storage
    /languages
        /en
            messages.php
        /zh_CN
            messages.phpCopy to clipboardErrorCopied
```

所有的语言文件都是返回一个数组，数组的键是字符串类型的：

```php
<?php
// storage/languages/en/messages.php

return [
    'welcome' => 'Welcome to our application',
];
```

```php
	#[Inject]
    private TranslatorInterface $translator;

    public function getUserInfo(RequestInterface $request, ResponseInterface $response) : Psr7ResponseInterface
    {
        // 只在当前请求或协程生命周期有效
        $this->translator->setLocale('zh_CN');
        $message = $this->translator->trans('messages.welcome');
        return $response->json(["code" => 200, "message" =>  $message]);

        // 全局有效
        echo __('messages.welcome');
        echo trans('messages.welcome');

    }
```

